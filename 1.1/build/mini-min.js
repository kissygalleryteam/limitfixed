/*!build time : 2014-04-22 5:06:40 PM*/
KISSY.add("gallery/limitfixed/1.1/index",function(a,b,c){function d(b,c){this.$fixed=g(b),this.cfg=a.merge(m,c)}function e(a){if(!a)return!1;var b=a.getDOMNode?a.getDOMNode():a;return 9===b.nodeType}var f=c.all,g=c.one,h=a.UA,i=g(document),j=g(window),k=6===h.ie,l=a.isUndefined,m={type:k?"absolute":"fixed",elLimit:i};a.augment(d,b.Target,{render:function(){var a=this.cfg,b=this.$fixed,c=b.offset();this._originTop=c.top,this._originLeft=c.left,this._originStyles={position:null,top:null,bottom:null,left:null};for(var d in this._originStyles)this._originStyles.hasOwnProperty(d)&&(this._originStyles[d]=b.css(d));a.holder&&(this._placeholder=this._buildPlaceholder()),this.adjust()},adjust:function(){this.restore(),this.scroll()},restore:function(){this.$fixed.css(this._originStyles)},scroll:function(){var a=this.cfg;"fixed"==a.type&&this._calFixedPosition()},_calFixedPosition:function(){var b=this.cfg,c=(b.points||{},this.$fixed),d=g(b.elLimit),e=this._getOffset(d),f={},h=i.scrollTop(),j=i.scrollLeft();e.bottom=e.top+d.outerHeight(),e.right=e.left+d.outerWidth(),h>e.top&&h<e.bottom-c.outerHeight()?f.top=0:h>e.bottom-c.outerHeight()&&h<e.bottom&&(f.top=-(h-e.bottom+c.outerHeight())),j>e.left&&j<e.right-c.outerWidth()?f.left=0:j>e.right-c.outerWidth()&&j<e.right&&(f.left=-(j-e.right+c.outerWidth())),!l(f.top)&&l(f.left)&&(f.left=this._originLeft-j),!l(f.left)&&l(f.top)&&(f.top=this._originTop-h),l(f.top)&&l(f.left)?(c.css(this._originStyles),this._hidePlaceholder()):(c.css(a.mix({position:"fixed"},f)),this._showPlaceholder())},_getOffset:function(a){var b=this.cfg,c=e(a)?{left:0,top:0}:a.offset();return"absolute"==b.type&&(c={}),c},_buildPlaceholder:function(){var a=this.$fixed,b=f('<div style="visibility:hidden;margin:0;padding:0;"></div>');return b.width(a.outerWidth()).height(a.outerHeight()).css("float",a.css("float")).insertAfter(a),b},_showPlaceholder:function(){this._placeholder&&this._placeholder.show()},_hidePlaceholder:function(){this._placeholder&&this._placeholder.hide()}});var n=[];return a.ready(function(){j.on("scroll resize",function(){a.each(n,function(a){a.scroll()})})}),function(a,b){var c=new d(a,b);return n.push(c),c}},{requires:["event","node"]}),KISSY.add("gallery/limitfixed/1.1/mini",function(a,b){return b},{requires:["./index"]});